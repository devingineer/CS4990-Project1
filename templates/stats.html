{% extends "base.html" %}
{% block content %}
<h4 class="fw-bold mb-4">Response Stats</h4>

<div class="card shadow-sm border-0" style="overflow-x:auto;">
  <div class="card-body p-0">
    <table class="table table-hover mb-0" style="font-size:.85rem; white-space:nowrap;">
      <thead class="table-dark">
        <tr>
          <th class="px-4 py-3">Started (UTC)</th>
          <th class="px-4 py-3">Participant</th>
          {% for fig in figures %}
          <th class="px-3 py-3 text-center">
            {{ fig | replace(".png","") }}
          </th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for p in pivot %}
        <tr>
          <td class="px-4 py-2 text-muted">{{ p["ts"] }}</td>
          <td class="px-4 py-2 font-monospace text-muted">{{ p["user_id"] }}</td>
          {% for answer in p["answers"] %}
          <td class="px-3 py-2 text-center">{{ answer }}</td>
          {% endfor %}
        </tr>
        {% else %}
        <tr>
          <td colspan="{{ 2 + figures | length }}" class="text-center text-muted py-4">
            No responses yet.
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
